function createTabGroup(e,t){var i=e.tabGroup,a=Ti.UI.createView({width:320,height:54,bottom:0,zIndex:999});e.add(a);var n=Ti.UI.createView({width:320,height:52,bottom:0,backgroundImage:root+"/images/tabgroup/background.png"});a.add(n);var r=Ti.UI.createView({height:4,width:320,top:0,backgroundImage:root+"/images/tabgroup/colorlines.png"});a.add(r);var o=[{id:0,image:homeIcon,hover:homeIconH,url:homeUrl,left:0},{id:1,image:locationIcon,hover:locationIconH,url:locationUrl,left:64},{id:2,image:reminderIcon,hover:reminderIconH,url:reminderUrl,left:192},{id:3,image:settingsIcon,hover:settingsIconH,url:settingsUrl,left:256}];populateTabGroup(o,n,t,i);var c=Ti.UI.createView({width:64,height:58,bottom:0,backgroundImage:root+"/images/tabgroup/call-icon.png",zIndex:9999});e.add(c),c.addEventListener("click",function(){var e=crisis_number.replace(/[^0-9]/g,"");e=e.split(" ").join(""),Ti.Platform.openURL("tel:"+e)})}function populateTabGroup(e,t,i,a){for(var n=0;e.length>n;n++){var r=e[n],o=Ti.UI.createView({width:64,height:52,left:r.left,backgroundImage:r.image,backgroundSelectedImage:r.hover,link:r.url,id:r.id});t.add(o),o.id==i&&(o.backgroundImage=o.backgroundSelectedImage),o.addEventListener("click",function(){a.setActiveTab(this.id),"Home"!=Ti.UI.currentWindow.title&&0==this.id&&(Ti.UI.currentWindow.close(),"Home"!=Ti.UI.currentWindow.title&&0==this.id&&(Ti.UI.currentWindow.close(),"Home"!=Ti.UI.currentWindow.title&&0==this.id&&Ti.UI.currentWindow.close()))}),0==o.id&&"Home"!=Ti.UI.currentWindow.title&&(o.backgroundImage=r.image),a.activeTab.addEventListener("focus",function(){"Home"==a.activeTab.window.title&&"Home"!=Ti.UI.currentWindow.title&&Ti.UI.currentWindow.close()})}}function designWindow(e,t,i,a){e.backgroundColor="#FFFFFF",e.addEventListener("focus",function(){e.backgroundImage=Ti.App.userbg}),0!=t&&(e.title=t,createCustomTabBar(e,a)),0!=i&&(e.backgroundImage=i)}function createCustomTabBar(e,t){var i=Ti.UI.createView({width:320,height:52,top:0,zIndex:999});e.add(i);var a=Ti.UI.createView({width:320,height:50,top:0,backgroundImage:root+"/images/tabbar/background.png"});i.add(a);var n=Ti.UI.createView({height:4,width:320,top:48,backgroundImage:root+"/images/tabbar/colorlines.png"});i.add(n);var r=Ti.UI.createLabel({text:e.title,font:{fontSize:16,fontWeight:"bold"}});if(i.add(r),0!=t){var o=Ti.UI.createView({left:15,width:60});i.add(o);var c=Ti.UI.createView({width:10,height:17,left:0,backgroundImage:root+"/images/common/backarrow.png"});o.add(c);var d=Ti.UI.createLabel({left:15,font:{fontSize:15},text:"Back",color:"#29AD04"});o.add(d),o.addEventListener("click",function(){e.close({animated:!0})})}}function populateHome(e,t){for(var i=0;e.length>i;i++){var a=e[i],n=Ti.UI.createImageView({width:107,height:143,left:a.left,top:a.top,image:a.image,backgroundImage:root+"/images/home/iconglow.png",backgroundSelectedImage:a.hover,link:a.url,id:a.id});t.add(n),n.addEventListener("click",function(){var e=Ti.UI.createWindow({url:this.link});Ti.UI.currentTab.open(e)}),n.addEventListener("touchstart",function(){this.opacity=.5}),n.addEventListener("touchend",function(){this.opacity=1});var r=Ti.UI.createImageView({width:100,height:4,bottom:0,image:root+"/images/home/separatorline-horizontal.png"}),o=Ti.UI.createImageView({height:100,width:4,right:0,image:root+"/images/home/separatorline-vertical.png"});i>=0&&5>=i&&n.add(r),(0==i||1==i||3==i||4==i||6==i||7==i)&&n.add(o)}}function getAlert(e){var t=Ti.UI.createAlertDialog({title:app_name,message:e});t.show()}function createFileIfNotExist(e){e.exists()===!1&&(e.createFile(),e.write('<?xml version="1.0" encoding="UTF-8"?><info></info>'))}function checkUserNew(){var e=!1,t=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"/userinfo.xml");createFileIfNotExist(t);var i=t.read().text,a=Ti.XML.parseString(i),n=a.getElementsByTagName("name");return n.length>0&&(e=!0),e}function saveUserInfo(e,t,i,a){var n=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"/userinfo.xml");createFileIfNotExist(n);var r='<?xml version="1.0" encoding="UTF-8"?><userinfo>';r+="<name>"+e+"</name>",r+="<color>"+t+"</color>",r+="<q31>"+i[1]+"</q31>",r+="<q32>"+i[2]+"</q32>",r+="<q33>"+i[3]+"</q33>",r+="<q41>"+a[1]+"</q41>",r+="<q42>"+a[2]+"</q42>",r+="<q43>"+a[3]+"</q43>",r+="</userinfo>",n.write(r)}function getColorLabel(e){var t="";switch(e){case"#D30102":t="red";break;case"#27A805":t="green";break;case"#F5E200":t="yellow";break;case"#0575E3":t="blue";break;default:t="blue"}return t}function getUserBg(e){return root+"/images/common/"+getColorLabel(e)+"/background.png"}function sprintf(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,i=0,a=t[i++],n=function(e,t,i,a){i||(i=" ");var n=e.length>=t?"":Array(1+t-e.length>>>0).join(i);return a?e+n:n+e},r=function(e,t,i,a,r,o){var c=a-e.length;return c>0&&(e=i||!r?n(e,a,o,i):e.slice(0,t.length)+n("",c,"0",!0)+e.slice(t.length)),e},o=function(e,t,i,a,o,c,d){var l=e>>>0;return i=i&&l&&{2:"0b",8:"0",16:"0x"}[t]||"",e=i+n(l.toString(t),c||0,"0",!1),r(e,i,a,o,d)},c=function(e,t,i,a,n,o){return null!=a&&(e=e.slice(0,a)),r(e,"",t,i,n,o)},d=function(e,a,d,l,s,u,g){var m,f,p,T,h;if("%%"===e)return"%";for(var w=!1,b="",v=!1,I=!1,k=" ",U=d.length,y=0;d&&U>y;y++)switch(d.charAt(y)){case" ":b=" ";break;case"+":b="+";break;case"-":w=!0;break;case"'":k=d.charAt(y+1);break;case"0":v=!0;break;case"#":I=!0}if(l=l?"*"===l?+t[i++]:"*"==l.charAt(0)?+t[l.slice(1,-1)]:+l:0,0>l&&(l=-l,w=!0),!isFinite(l))throw Error("sprintf: (minimum-)width must be finite");switch(u=u?"*"===u?+t[i++]:"*"==u.charAt(0)?+t[u.slice(1,-1)]:+u:"fFeE".indexOf(g)>-1?6:"d"===g?0:void 0,h=a?t[a.slice(0,-1)]:t[i++],g){case"s":return c(h+"",w,l,u,v,k);case"c":return c(String.fromCharCode(+h),w,l,u,v);case"b":return o(h,2,I,w,l,u,v);case"o":return o(h,8,I,w,l,u,v);case"x":return o(h,16,I,w,l,u,v);case"X":return o(h,16,I,w,l,u,v).toUpperCase();case"u":return o(h,10,I,w,l,u,v);case"i":case"d":return m=+h||0,m=Math.round(m-m%1),f=0>m?"-":b,h=f+n(Math.abs(m)+"",u,"0",!1),r(h,f,w,l,v);case"e":case"E":case"f":case"F":case"g":case"G":return m=+h,f=0>m?"-":b,p=["toExponential","toFixed","toPrecision"]["efg".indexOf(g.toLowerCase())],T=["toString","toUpperCase"]["eEfFgG".indexOf(g)%2],h=f+Math.abs(m)[p](u),r(h,f,w,l,v)[T]();default:return e}};return a.replace(e,d)}function validatedate(e){var t=/^(0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])[\/\-]\d{4}$/;if(!e.value.match(t))return!1;var i=e.value.split("/"),a=e.value.split("-");if(lopera1=i.length,lopera2=a.length,lopera1>1)var n=e.value.split("/");else if(lopera2>1)var n=e.value.split("-");var r=parseInt(n[0]),o=parseInt(n[1]),c=parseInt(n[2]),d=[31,28,31,30,31,30,31,31,30,31,30,31];if((1==r||r>2)&&o>d[r-1])return!1;if(2==r){var l=!1;if((c%4||!(c%100))&&c%400||(l=!0),0==l&&o>=29)return!1;if(1==l&&o>29)return!1}}function var_dump(e){return"object"==typeof e?"Type: "+typeof e+(e.constructor?"\nConstructor: "+e.constructor:"")+"\nValue: "+e:"Type: "+typeof e+"\nValue: "+e}Ti.include("properties.js");